<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <title>Document</title>
  <style type="text/css">
    body {
      text-align: center;
      background-color: rgb(53, 42, 32);
    }

    input {
      /*按鈕*/
      background-color: #44c767;
      border-radius: 4px;
      border: 3px solid #18ab29;
      display: inline-block;
      cursor: pointer;
      color: #ffffff;
      font-size: 10px;
      padding: 10px 30px;
      margin: 3px;
      text-decoration: none;
      text-shadow: 1px 1px 9px #2f6627;
    }

    #div1 {
      /*background-color: cornflowerblue;
      background-size: 75%;
            margin-left: calc(100%/8);
            width: 75%;*/
      height: 50%;
      position: relative;
    }
  </style>
  <link href="jquery-ui.css" rel="stylesheet">
  <script src="external/jquery/jquery.js"></script>
  <script src="jquery-ui.js"></script>
  <script>

  </script>
  <script>
    let intervalId;
    let counts = 0;
    let closePianokey = 1;
    let windowC = 1;
    function phonering() {
      window.clearInterval(intervalId); document.getElementById("phoncall").play();
    }
    function start() {

    }
    function stop() {
      document.getElementById("do1").pause();
      document.getElementById("do1").currentTime = 0;
      document.getElementById("re1").pause();
      document.getElementById("re1").currentTime = 0;
      document.getElementById("mi1").pause();
      document.getElementById("mi1").currentTime = 0;
      document.getElementById("fa1").pause();
      document.getElementById("fa1").currentTime = 0;
      document.getElementById("sol1").pause();
      document.getElementById("sol1").currentTime = 0;
      document.getElementById("ra1").pause();
      document.getElementById("ra1").currentTime = 0;
      document.getElementById("si1").pause();
      document.getElementById("si1").currentTime = 0;
    }
    let checkpianoclose=0;
    function check(arr, cnt) {
      let ans = [5, 3, 3, 4, 2, 2, 1, 2, 3, 4, 5, 5, 5, 5, 3, 3, 4, 2, 2, 1, 3, 5, 5, 1];
      console.log(arr);
      for (let i = 23; i >= 0; i -= 1) {
        if (ans[i] != arr[cnt])
          return;
        if (cnt == 0)
          cnt = 23;
        else
          cnt -= 1;
      }
      console.log("1");
      checkpianoclose=1;
      window.alert("bingo");
      console.log(checkpianoclose);
      if(checkpianoclose==1){closepiano();}
    }
    function closepiano() {
      $("#Do").off("click",);
      $("#Re").off("click",);
      $("#Mi").off("click",);
      $("#Fa").off("click",);
      $("#Sol").off("click",);
      $("#Ra").off("click",);
      $("#Si").off("click",);
      $("#piano").off("click",);
      $("#piano_p").hide(); if(checkpianoclose==1){closePianokey = 0;}
    }
    $(function () {

      //-----------------------左箭頭
      $("#doorTopiano").click(
        function () {
          $("#phone1").hide();
          $("#phone").off("click",);
          $("#isAdoor").off("click",);
          $("#tobugs").click(
            function(){
              $("#bugs").show();
            }
          );
          $("#pianoAndpic").show(),
            $("#doorAndPhone").hide()
          $("#topiano").click(function () {//鋼琴(近)
            console.log("eee");
            $("#pianono").show();
          });
          $("#piano").click(function () {//鋼琴(琴鍵)
            console.log("eee1");
            if (closePianokey==1) { $("#piano_p").show(); }
          });
          let cnt = 0;
          let arr = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
          $("#Do").click(function () {//do
            stop();
            arr[cnt] = 1;
            check(arr, cnt);
            cnt += 1;
            cnt %= 24;
            document.getElementById("do1").play();
            console.log("do");
          });
          $("#Re").click(function () {//re
            stop();
            arr[cnt] = 2;
            cnt += 1;
            cnt %= 24;
            document.getElementById("re1").play();
            console.log("re");
          });
          $("#Mi").click(function () {//mi
            stop();
            arr[cnt] = 3;
            cnt += 1;
            cnt %= 24;
            document.getElementById("mi1").play();
            console.log("mi");
          });
          $("#Fa").click(function () {//fa
            stop();
            arr[cnt] = 4;
            cnt += 1;
            cnt %= 24;
            document.getElementById("fa1").play();
            console.log("fa");
          });
          $("#Sol").click(function () {//sol
            stop();
            arr[cnt] = 5;
            cnt += 1;
            cnt %= 24;
            document.getElementById("sol1").play();
            console.log("sol");
          });
          $("#Ra").click(function () {//ra
            stop();
            arr[cnt] = 6;
            cnt += 1;
            cnt %= 24;
            document.getElementById("ra1").play();
            console.log("ra");
          });
          $("#Si").click(function () {//si
            stop();
            arr[cnt] = 7;
            cnt += 1;
            cnt %= 24;
            document.getElementById("si1").play();
            console.log("si");
          });
        }
      )
      $("#deskTodoor").click(
        function () {
          $("#phone").click(function () {//電話
            if (tostart) { intervalId = window.setInterval(phonering, 15000); tostart = 0; }
            else { document.getElementById("phoncall").pause(); }
            $("#phone1").show();
          });
          $("#isAdoor").click(function () {//門
            $("#dialogDoor").dialog("open");
          });
          $("#dialogDoor").dialog({
            autoOpen: false,
            modal: true, height: 140,
            show: {
              effect: "blind",
              duration: 500
            },
            hide: {
              effect: "blind",
              duration: 250
            }
          });
          $("#doorAndPhone").show(),
            $("#deskAndFish").hide()
        }
      )
      $("#windowTodesk").click(
        function () {
          $("#forest").hide();
          $("#phone").off("click",);
          $("#isAdoor").off("click",);
          $("#deskAndFish").show(),
            $("#windowAndWoods").hide()
          $("#chair").draggable({
            drag: function () {
              counts++; console.log(counts);
              if (counts == 30) {
                $("#chair").draggable("option", "disabled", true);
                console.log("stop");
              }
            },

          })
        }
      )
      $("#pianoTowindow").click(
        function () {
          $("#bugs").hide();
          $("#phone").off("click",);
          $("#isAdoor").off("click",);
          $("#topiano").off("click",);
          $("#piano").off("click",);
          closepiano();
          if (windowC == 1) {
            $("#windowopen").one("click", function () {
              windowC = 0;
              document.getElementById("towindow").setAttribute("src", "窗戶_2.png");
              setTimeout(
                function () {
                  document.getElementById("bridbang").play();
                  setTimeout(
                    function () {
                      document.getElementById("towindow").setAttribute("src", "窗戶_db.png");
                    }, 900);
                }, 1000);
            });
          }
          else {
            $("#outwindow").click(
              function () {
                console.log("ww");
                $("#forest").show();
              }

            );

          }
          $("#windowAndWoods").show(),
            $("#pianoAndpic").hide()
          $("#pianono").hide();
          $("#piano_p").hide();
        }
      )
      //-------------------------------------
      $("#doorTodesk").click(
        function () {
          $("#phone1").hide();
          $("#phone").off("click",);
          $("#isAdoor").off("click",);
          $("#deskAndFish").show();
          $("#doorAndPhone").hide()
          $("#chair").draggable({
            drag: function () {
              counts++; console.log(counts);
              if (counts == 30) {
                $("#chair").draggable("option", "disabled", true);
                console.log("stop");
              }
            },

          })
        }
      );
      $("#deskTowindow").click(
        function () {
          $("#phone").off("click",);
          $("#isAdoor").off("click",);
          if (windowC == 1) {
            $("#windowopen").one("click", function () {
              windowC = 0;
              document.getElementById("towindow").setAttribute("src", "窗戶_2.png");
              setTimeout(
                function () {
                  document.getElementById("bridbang").play();
                  setTimeout(
                    function () {
                      document.getElementById("towindow").setAttribute("src", "窗戶_db.png");
                    }, 900);
                }, 1000);
            });
          }
          else {
            $("#outwindow").click(
              function () {
                console.log("ww");
                $("#forest").show();
              }

            );

          }
          $("#windowAndWoods").show(),
            $("#deskAndFish").hide()
        }
      )
      $("#windowTopiano").click(
        function () {
          $("#tobugs").click(
            function(){
              $("#bugs").show();
            }
          );
          $("#forest").hide();
          $("#phone").off("click",);
          $("#isAdoor").off("click",);
          $("#pianoAndpic").show(),
            $("#windowAndWoods").hide()
          $("#topiano").click(function () {//鋼琴(近)
            console.log("eee");
            $("#pianono").show();
          }); $("#piano").click(function () {//鋼琴(琴鍵)
            console.log("eee1");
            if (closePianokey==1) { $("#piano_p").show(); }

          });
          let cnt = 0;
          let arr = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
          $("#Do").click(function () {//do
            stop();
            arr[cnt] = 1;
            check(arr, cnt);
            cnt += 1;
            cnt %= 24;
            document.getElementById("do1").play();
            console.log("do");
          });
          $("#Re").click(function () {//re
            stop();
            arr[cnt] = 2;
            cnt += 1;
            cnt %= 24;
            document.getElementById("re1").play();
            console.log("re");
          });
          $("#Mi").click(function () {//mi
            stop();
            arr[cnt] = 3;
            cnt += 1;
            cnt %= 24;
            document.getElementById("mi1").play();
            console.log("mi");
          });
          $("#Fa").click(function () {//fa
            stop();
            arr[cnt] = 4;
            cnt += 1;
            cnt %= 24;
            document.getElementById("fa1").play();
            console.log("fa");
          });
          $("#Sol").click(function () {//sol
            stop();
            arr[cnt] = 5;
            cnt += 1;
            cnt %= 24;
            document.getElementById("sol1").play();
            console.log("sol");
          });
          $("#Ra").click(function () {//ra
            stop();
            arr[cnt] = 6;
            cnt += 1;
            cnt %= 24;
            document.getElementById("ra1").play();
            console.log("ra");
          });
          $("#Si").click(function () {//si
            stop();
            arr[cnt] = 7;
            cnt += 1;
            cnt %= 24;
            document.getElementById("si1").play();
            console.log("si");
          });
        }
      )
      $("#pianoTodoor").click(
        function () {
          $("#bugs").hide();
          $("#pianono").hide();
          $("#piano_p").hide();
          $("#topiano").off("click",);
          $("#piano").off("click",);
          closepiano();
          $("#phone").click(function () {//電話
            if (tostart) { intervalId = window.setInterval(phonering, 15000); tostart = 0; }
            else { document.getElementById("phoncall").pause(); }
            $("#phone1").show();
          });
          $("#isAdoor").click(function () {//門
            $("#dialogDoor").dialog("open");
          });
          $("#dialogDoor").dialog({
            autoOpen: false,
            modal: true, height: 140,
            show: {
              effect: "blind",
              duration: 500
            },
            hide: {
              effect: "blind",
              duration: 250
            }
          });
          $("#doorAndPhone").show(),
            $("#pianoAndpic").hide()
        }
      )


      $("#deskAndFish").hide()
      $("#windowAndWoods").hide()
      $("#pianoAndpic").hide()
      $("#dialog").dialog({
        autoOpen: false,
        modal: true, height: 600, width: 700,
        show: {
          effect: "blind",
          duration: 500
        },
        hide: {
          effect: "blind",
          duration: 250
        }
      });
      let tostart = 1;
      $("#tt").click(function () {
        console.log("yyy");
        document.getElementById("phoncall").play();
      })

      $("#phone").click(function () {//電話
        if (tostart) { intervalId = window.setInterval(phonering, 15000); tostart = 0; }
        else { document.getElementById("phoncall").pause(); }
        $("#phone1").show();
      });
      $("#isAdoor").click(function () {//門
        $("#dialogDoor").dialog("open");
      });
      $("#dialogDoor").dialog({
        autoOpen: false,
        modal: true, height: 140,
        show: {
          effect: "blind",
          duration: 500
        },
        hide: {
          effect: "blind",
          duration: 250
        }
      });
      $("#phone1").hide();
      $("#chair").draggable({ axis: "x" });
      $("#pianono").hide(); $("#piano_p").hide();
      $("#Mbook").click(
        function () {
          console.log('memorys');
        });
      $("#fishplace").click(function () {
        console.log("fish");

      });
      $("#forest").hide();
      $("#bugs").hide();
    });//onclick="phone(); onclick="door();



  </script>
</head>

<body onload="start()">

  <audio preload="auto" loop id="phoncall">
    <source src="phone-sound.mp3" type="audio/mpeg">
  </audio>
  <audio preload="auto" id="bridbang">
    <source src="yisell_sound_2014072423594313238_66366 (mp3cut (mp3cut.net).mp3" type="audio/mpeg">
  </audio>
  <audio preload="auto" id="do1">
    <source src="doremi/1 C.mp3" type="audio/mpeg">
  </audio>
  <audio preload="auto" id="re1">
    <source src="doremi/2 D.mp3" type="audio/mpeg">
  </audio>
  <audio preload="auto" id="mi1">
    <source src="doremi/3 E.mp3" type="audio/mpeg">
  </audio>
  <audio preload="auto" id="fa1">
    <source src="doremi/4 F.mp3" type="audio/mpeg">
  </audio>
  <audio preload="auto" id="sol1">
    <source src="doremi/5 G.mp3" type="audio/mpeg">
  </audio>
  <audio preload="auto" id="ra1">
    <source src="doremi/6 A.mp3" type="audio/mpeg">
  </audio>
  <audio preload="auto" id="si1">
    <source src="doremi/7 B.mp3" type="audio/mpeg">
  </audio>


  <div id="dialog" title="這是一個電話">
    <img src="電話1.png" width="650" style=" text-align: center;" id="ooo">

  </div>
  <div id="dialogDoor" title="說明">
    <p>這是一扇門</p>
  </div>
  <div class="container-fluid mt-3" id="doorAndPhone">
    <div class="row">
      <div class="col-sm-1"> <input style="text-align: center;" type="button" value="<-" id="doorTopiano">
      </div>
      <div class="col-sm-10" id="div1">
        <img src="電話1.png" id="phone1" width="1000px" style="position: absolute; z-index:4;">
        <img src="門_1.png" width="1000px" height="600px" z-index="0" usemap="#workmap">
        <map name="workmap">
          <area shape="rect" coords="660,350,750,420" id="phone">
          <area shape="rect" coords="215,120,430,600" id="isAdoor">
        </map>
      </div>
      <div class="col-sm-1"><input style="text-align: center;" type="button" value="->" id="doorTodesk"></div>
    </div>
  </div>

  <div class="container-fluid mt-3" id="deskAndFish">
    <div class="row">
      <div class="col-sm-1"><input style="text-align: center;" type="button" value="<-" id="deskTodoor"></div>
      <div class="col-sm-10">
        <img src="桌子1-removebg-preview123.png" id="chair" width="180px" z-index="2"
          style="position: absolute; top: 350px;left: 340px;">
        <img src="桌子2_2.png" width="1000px" height="600px" z-index="0" usemap="#memorybook">
        <map name="memorybook">
          <area shape="rect" coords="230,350,360,380" id="Mbook">
          <area shape="rect" coords="610,250,870,400" id="fishplace">
        </map>
      </div>
      <div class="col-sm-1"><input style="text-align: center;" type="button" value="->" id="deskTowindow"></div>
    </div>
  </div>

  <div class="container-fluid mt-3" id="windowAndWoods">
    <div class="row">
      <div class="col-sm-1"><input style="text-align: center;" type="button" value="<-" id="windowTodesk"></div>
      <div class="col-sm-10">
        <img id="forest" src="樹林.png" width="1000px" height="600px" style="position: absolute;z-index:3;">
        <img id="towindow" src="窗簾_1.png" width="1000px" height="600px" z-index="0" usemap="#windowwork">
        <map name="windowwork">
          <area shape="rect" coords="500,100,750,450" id="windowopen">
          <area shape="rect" coords="250,100,499,450" id="outwindow">
        </map>
      </div>
      <div class="col-sm-1"><input style="text-align: center;" type="button" value="->" id="windowTopiano"></div>
    </div>
  </div>

  <div class="container-fluid mt-3" id="pianoAndpic">
    <div class="row">
      <div class="col-sm-1"><input style="text-align: center;" type="button" value="<-" id="pianoTowindow"></div>
      <div class="col-sm-10">
        <img src="昆蟲標本.png" width="1000px " id="bugs" style="position: absolute; z-index: 3;">
        <img src="鋼琴視角2.png" width="1000px " id="piano_p" style="position: absolute; z-index: 2;"
          usemap="#pianodoremiworkmap">
        <img src="鋼琴視角1.png" width="1000px " z-index="1" id="pianono" style="position: absolute;"
          usemap="#pianonoworkmap">
        <img src="鋼琴_1.png" width="1000px" height="600px" z-index="0" usemap="#pianoworkmap">

        <map name="pianoworkmap">
          <area shape="rect" coords="150,200,450,400" id="topiano">
          <area shape="rect" coords="540,80,710,210" id="tobugs">
        </map>
        <map name="pianonoworkmap">
          <area shape="rect" coords="100,200,750,300" id="piano">
        </map>
        <map name="pianodoremiworkmap">
          <area shape="rect" coords="321,100,380,420" id="Do">
          <area shape="rect" coords="381,100,430,420" id="Re">
          <area shape="rect" coords="431,100,490,420" id="Mi">
          <area shape="rect" coords="491,100,540,420" id="Fa">
          <area shape="rect" coords="541,100,590,420" id="Sol">
          <area shape="rect" coords="591,100,650,420" id="Ra">
          <area shape="rect" coords="651,100,710,420" id="Si">
        </map>
      </div>
      <div class="col-sm-1"> <input style="text-align: center;" type="button" value="->" id="pianoTodoor"></div>
    </div>
  </div>

</body>

</html>
